openapi: 3.1.0
info:
  title: Premium Cleaning Service API
  description: 프리미엄 공실 청소 서비스 웹사이트 API 스펙
  version: 1.0.0
  contact:
    name: API Support
    email: support@mclean.example.com

servers:
  - url: https://api.mclean.example.com
    description: Production
  - url: http://localhost:3000/api
    description: Development

paths:
  /services:
    get:
      operationId: getServices
      summary: 서비스 목록 조회
      description: 모든 활성 서비스 목록을 반환합니다.
      tags:
        - Services
      parameters:
        - name: isActive
          in: query
          schema:
            type: boolean
          description: 활성 상태 필터
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Service'
                  total:
                    type: integer
        '500':
          $ref: '#/components/responses/InternalServerError'

  /services/{serviceId}:
    get:
      operationId: getService
      summary: 특정 서비스 상세 조회
      tags:
        - Services
      parameters:
        - name: serviceId
          in: path
          required: true
          schema:
            type: string
            enum: ['residential', 'moving', 'interior']
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Service'
        '404':
          $ref: '#/components/responses/NotFound'

  /case-studies:
    get:
      operationId: getCaseStudies
      summary: 시공 사례 목록 조회
      tags:
        - Case Studies
      parameters:
        - name: serviceType
          in: query
          schema:
            type: string
            enum: ['residential', 'moving', 'interior', 'all']
          description: 서비스 유형 필터
        - name: featured
          in: query
          schema:
            type: boolean
          description: 강조 사례만 표시
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
        - name: offset
          in: query
          schema:
            type: integer
            default: 0
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/CaseStudy'
                  total:
                    type: integer
                  hasMore:
                    type: boolean

  /case-studies/{caseId}:
    get:
      operationId: getCaseStudy
      summary: 특정 사례 상세 조회
      tags:
        - Case Studies
      parameters:
        - name: caseId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CaseStudy'
        '404':
          $ref: '#/components/responses/NotFound'

  /reviews:
    get:
      operationId: getReviews
      summary: 고객 후기 목록 조회
      tags:
        - Reviews
      parameters:
        - name: theme
          in: query
          schema:
            type: string
          description: 후기 테마 필터 (완성도, 투명성, 전문성 등)
        - name: verified
          in: query
          schema:
            type: boolean
          default: true
          description: 검증된 후기만
        - name: limit
          in: query
          schema:
            type: integer
            default: 10
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Review'
                  total:
                    type: integer

  /processes:
    get:
      operationId: getProcesses
      summary: 작업 프로세스 단계 조회
      tags:
        - Process
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Process'
                  total:
                    type: integer

  /equipment:
    get:
      operationId: getEquipment
      summary: 장비 목록 조회
      tags:
        - Equipment
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Equipment'
                  total:
                    type: integer

  /notices:
    get:
      operationId: getNotices
      summary: 이용 안내 항목 조회
      tags:
        - Notices
      parameters:
        - name: category
          in: query
          schema:
            type: string
            enum: ['restrictions', 'additionalCosts', 'preparation', 'as', 'cancellation']
          description: 공지 카테고리 필터
      responses:
        '200':
          description: 성공
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/NoticeItem'
                  total:
                    type: integer

components:
  schemas:
    Service:
      type: object
      required:
        - id
        - name
        - slug
        - description
        - fullDescription
        - icon
        - cleaningAreas
        - isActive
      properties:
        id:
          type: string
          enum: ['residential', 'moving', 'interior']
        name:
          type: string
          example: '입주청소'
        slug:
          type: string
          example: 'residential-cleaning'
        description:
          type: string
          maxLength: 100
          example: '신축 시공 과정에서 남은 분진과 잔여 요소를 정리합니다.'
        fullDescription:
          type: string
          maxLength: 500
        icon:
          type: string
          example: 'home'
        image:
          type: string
          format: uri
          nullable: true
        cleaningAreas:
          type: array
          minItems: 7
          maxItems: 10
          items:
            type: string
          example:
            - '현관'
            - '방·거실·복도'
            - '창문/창틀/샷시(내창)'
        restrictions:
          type: array
          items:
            type: string
        optionalServices:
          type: array
          items:
            type: string
        necessityScenarios:
          type: array
          minItems: 1
          items:
            type: string
        isActive:
          type: boolean

    CaseStudy:
      type: object
      required:
        - id
        - title
        - slug
        - serviceType
        - squareFeet
        - squareMeters
        - problems
        - equipment
        - workProcess
        - results
        - images
        - customerFeedback
        - workingDays
        - publishedAt
        - featured
      properties:
        id:
          type: string
          pattern: '^case-\d{3}$'
          example: 'case-001'
        title:
          type: string
          example: '신축 84평 아파트 입주청소 - 시공 분진 완벽 제거'
        slug:
          type: string
          example: 'case-001-84-apartment-residential'
        serviceType:
          type: string
          enum: ['residential', 'moving', 'interior']
        squareFeet:
          type: integer
          example: 84
          minimum: 10
          maximum: 500
        squareMeters:
          type: integer
          example: 277
        location:
          type: string
          nullable: true
          example: '서울 강남구'
        problems:
          type: array
          minItems: 2
          maxItems: 6
          items:
            type: string
          example:
            - '시공 분진이 모든 표면에 적립'
            - '마루 면에 건설 자재 흔적'
        equipment:
          type: array
          minItems: 2
          maxItems: 5
          items:
            type: string
          example:
            - '전문 흡입 시스템'
            - '고온 스팀 시스템'
        workProcess:
          type: string
          maxLength: 300
        results:
          type: object
          required:
            - before
            - after
            - keyImprovements
          properties:
            before:
              type: array
              minItems: 1
              items:
                type: string
            after:
              type: array
              minItems: 1
              items:
                type: string
            keyImprovements:
              type: array
              minItems: 1
              items:
                type: string
        images:
          type: object
          required:
            - thumbnail
            - before
            - after
          properties:
            thumbnail:
              type: string
              format: uri
            before:
              type: array
              minItems: 1
              maxItems: 3
              items:
                type: string
                format: uri
            after:
              type: array
              minItems: 1
              maxItems: 3
              items:
                type: string
                format: uri
        customerFeedback:
          $ref: '#/components/schemas/CustomerFeedback'
        workingDays:
          type: integer
          minimum: 1
          maximum: 7
          example: 1
        publishedAt:
          type: string
          format: date-time
        updatedAt:
          type: string
          format: date-time
          nullable: true
        featured:
          type: boolean

    Review:
      type: object
      required:
        - id
        - type
        - content
        - customer
        - service
        - theme
        - rating
        - publishedAt
        - verified
      properties:
        id:
          type: string
          pattern: '^review-\d{3}$'
        type:
          type: string
          enum: ['quote', 'screenshot']
        content:
          type: object
          properties:
            text:
              type: string
              maxLength: 150
              nullable: true
            screenshotUrl:
              type: string
              format: uri
              nullable: true
            source:
              type: string
              nullable: true
        customer:
          type: object
          required:
            - name
          properties:
            name:
              type: string
              example: 'ㅇ고객'
            platform:
              type: string
              nullable: true
        service:
          type: string
          enum: ['residential', 'moving', 'interior', 'general']
        theme:
          type: string
          example: '완성도'
        rating:
          type: integer
          enum: [1, 2, 3, 4, 5]
        publishedAt:
          type: string
          format: date-time
        verified:
          type: boolean

    Process:
      type: object
      required:
        - id
        - step
        - title
        - description
        - icon
      properties:
        id:
          type: string
          pattern: '^\d$'
          example: '1'
        step:
          type: integer
          minimum: 1
          maximum: 9
        title:
          type: string
          example: '상담 및 요구사항 확인'
        description:
          type: string
          maxLength: 100
        duration:
          type: string
          nullable: true
          example: '15분'
        icon:
          type: string
          example: 'phone'
        details:
          type: array
          nullable: true
          items:
            type: string

    Equipment:
      type: object
      required:
        - id
        - name
        - description
        - benefits
        - useCases
        - icon
      properties:
        id:
          type: string
          enum: ['suction', 'steam', 'polishing', 'ecofriendly']
        name:
          type: string
          example: '전문 흡입 시스템'
        description:
          type: string
          maxLength: 100
        benefits:
          type: array
          minItems: 2
          maxItems: 3
          items:
            type: string
        useCases:
          type: array
          minItems: 1
          items:
            type: string
        ecoRating:
          type: string
          enum: ['high', 'medium', 'low']
          nullable: true
        icon:
          type: string
        image:
          type: string
          format: uri
          nullable: true

    NoticeItem:
      type: object
      required:
        - id
        - category
        - title
        - content
        - priority
        - publishedAt
      properties:
        id:
          type: string
          pattern: '^notice-\d{3}$'
        category:
          type: string
          enum: ['restrictions', 'additionalCosts', 'preparation', 'as', 'cancellation']
        title:
          type: string
        content:
          type: string
          description: Markdown 형식
        priority:
          type: string
          enum: ['high', 'medium', 'low']
        publishedAt:
          type: string
          format: date-time

    CustomerFeedback:
      type: object
      required:
        - name
        - quote
        - rating
      properties:
        name:
          type: string
          example: 'ㅇ고객'
        quote:
          type: string
          maxLength: 100
        rating:
          type: integer
          enum: [1, 2, 3, 4, 5]
        details:
          type: string
          maxLength: 500
          nullable: true

  responses:
    NotFound:
      description: 리소스를 찾을 수 없습니다.
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string

    InternalServerError:
      description: 서버 오류가 발생했습니다.
      content:
        application/json:
          schema:
            type: object
            properties:
              error:
                type: string
              message:
                type: string

  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT

